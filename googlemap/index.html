<!DOCTYPE html>
<html>
  <head>
    <title>Google Maps Search Box</title>
    <style>
      /* Set the height of the map */
      #map {
        height: 400px;
      }
    </style>
  </head>
  <body>
    <h1>Google Maps Search Box</h1>
    <div>
      <input id="search" type="text" placeholder="Search...">
    </div>
    <div>
      <label for="lat">Latitude:</label>
      <input id="lat" type="number" step="any">
      <label for="lng">Longitude:</label>
      <input id="lng" type="number" step="any">
      <button id="go" type="button">Go</button>
    </div>
    <div id="map"></div>
    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAAyrQuYB1xJl7YohDMqATsOJWDI5vXprI&libraries=places,geometry&callback=initMap"
      async
      defer
    ></script>
    <script>
      let map;
      let marker;
      const cities = [
        { name: "Quezon City", position: { lat: 14.6760, lng: 121.0437 } },
        { name: "Makati City", position: { lat: 14.5547, lng: 121.0244 } },
        { name: "Caloocan City", position: { lat: 14.7566, lng: 121.0444 } },
      ];
      const cityMarkers = [];

      function initMap() {
        map = new google.maps.Map(document.getElementById("map"), {
          center: { lat: 14.6091, lng: 121.0223 }, // Center the map to Manila, Philippines
          zoom: 10,
        });

        const input = document.getElementById("search");
        const searchBox = new google.maps.places.SearchBox(input);

        map.addListener("bounds_changed", () => {
          searchBox.setBounds(map.getBounds());
        });

        searchBox.addListener("places_changed", () => {
          const places = searchBox.getPlaces();

          if (places.length == 0) {
            return;
          }

          const bounds = new google.maps.LatLngBounds();
          places.forEach((place) => {
            if (!place.geometry) {
              console.log("Returned place contains no geometry");
              return;
            }

            if (!marker) {
              marker = new google.maps.Marker({
                map,
                position: place.geometry.location,
              });
            } else {
              marker.setPosition(place.geometry.location);
            }

            if (place.geometry.viewport) {
              bounds.union(place.geometry.viewport);
            } else {
              bounds.extend(place.geometry.location);
            }
          });

          map.fitBounds(bounds);
          map.setZoom(14);

          console.log(marker.getPosition().lat());
          console.log(marker.getPosition().lng());
        });

        const goButton = document.getElementById("go");
        goButton.addEventListener("click", () => {
          const lat = parseFloat(document.getElementById("lat").value);
          const lng = parseFloat(document.getElementById("lng").value);

          if (isNaN(lat) || isNaN(lng)) {
            console.log("Invalid coordinates");
            return;
          }

          const location = new google.maps.LatLng(lat, lng);

          if (!marker) {
            marker = new google.maps.Marker({
              map,
              position: location,
            });
          } else {
            marker.setPosition(location);
          }

          map.setCenter(location);
          map.setZoom(14);

          console.log(marker.getPosition().lat());
          console.log(marker.getPosition().lng());
        });

        // Add markers for the cities
        cities.forEach((city) => {
          const cityMarker = new google.maps.Marker({
            position: city.position,
            map,
            title: city.name,
          });
          cityMarkers.push(cityMarker);
        });
      }
    </script>
  </body>
</html>

<!-- The updated code creates a single cities array that contains the name and position of each city. The array is then looped through using forEach(), and a marker is created for each city using the google.maps.Marker constructor. The markers are stored in the cityMarkers array for later use.

You can add or remove cities from the cities array as needed, and the markers will be created or removed automatically. -->
